# Симулятор работы лифтов в здании (elevator-simulator)

###
Дэмо: https://cosmastar112.github.io/elevator-simulator/index.html

### Краткое описание
Идея взята из тестовой задачи (формулировки и требования оригинальной задачи были изменены).

Приложение симулирует работу лифта в здании. Можно настроить кол-во этажей в здании (от 9 до 30) и грузоподъемность лифта (от 800 до 1300кг); кол-во лифтов пока что всегда равно одному.

После запуска симуляции на каждом этаже становятся доступны для нажатия кнопки вызова лифта (вверх, вниз). Нажатие на кнопку вызова симулирует поведение человека, который вызывает лифт. После нажатия кнопки вызова на этаже появляется группа людей (от 1 до 5; со случайным весом от 40 до 120 кг). Задача лифта – обработать вызовы, развозя пассажиров по этажам назначения. Этаж назначения пассажир выбирает самостоятельно после погрузки в лифт; выбор пассажиров показывается на кнопочной панели в панели управления лифта. Кнопки вызова подсвечиваются до тех пор, пока лифт не прибудет на этаж назначения. Если лифт едет наверх, он не останавливается на кнопки вызова вниз; если лифт едетвниз, он не останавливается на кнопки вызова наверх.

Поскольку лифт имеет максимальную грузоподъемность, в процессе погрузки пассажиров могут возникнуть ситуации перегруза. В таком случае, вновь вошедшие пассажиры выходят по одному в случайном порядке, пока перегруз не будет устранен. Пассажир, которому не нашлось места в кабине, удаляется с этажа (вынужден использовать лестницу).

### Интерфейс
Пользователь задает параметры системы с помощью формы: количество этажей, количество лифтов и грузоподъемность лифта. После нажатия кнопки «Запуск!» появляется основное окно приложения. Окно поделено на 3 части:
* Здание, представленное таблицей
* Панель управления лифтом
* Дебаг-панели

Таблица «Здание» состоит из столбцов:
* Этаж
* Кнопки вызова
* Группа людей
* Местоположение лифта

Каждая строка в таблице соответствует этажу (нумерация в столбце «Этаж»).

Чтобы создать вызов на этаже, необходимо кликнуть по кнопке «Вверх» или «Вниз». Кнопки расположены в столбце «Кнопки вызова» соответствующей этажу строке. После создания вызова, кнопка подсвечивается до тех пор, пока вызов не будет обработан. Создание вызова и другие операции приводят к появлению соответствующей вызову строки на debug-панели «Вызовы (debug)».

Создание вызова приводит к появлению группы людей (от 1 до 5) в столбце «Группа людей» строки, соответствующей этажу. Каждый отдельный человек в группе представлен блоком, на котором выводится его уникальный номер.

На этаж, на котором был создан вызов, должен прибыть лифт. Текущее положение лифта можно определить с помощью столбца «Местоположение лифта». При изменении позиции лифта, надпись «Лифт №» появляется в столбце строки, которая соответствует этажу, на котором он сейчас находится. Начальная позиции лифта – первый этаж.

По прибытию на этаж выполняется погрузка людей в кабину лифта: столбец «Группа людей» очищается. На панель управления лифта («Панель управления №») выводится информация о количестве пассажиров (индикатор «Количество пассажиров»), общем весе пассажиров (индикатор «Общий вес пассажиров») и перегрузе («Индикатор перегруза»). Также в панели управления представлена кнопочная панель, которую пассажиры используют для создания вызовов. Кнопки, соответствующие выбранным этажам назначения, подсвечиваются на этой панели до тех пор, пока вызовы не будут обработаны.

Чтобы понять, какие именно пассажиры находятся в кабине лифта, можно использовать debug-панель «Пассажиры (debug)». Панель представляет собой таблицу, состоящую из столбцов:
* Id
* Этаж погрузки
* Этаж выгрузки
* Вес

Каждая строка в таблице соответствует пассажиру. До тех пор, пока строка не выделена зеленым цветом, пассажир находится в кабине лифта (его вызов не обработан).

### Цели создания
* Реализовать ТЗ
* Использовать чистый JavaScript (особе внимание уделить обновлению интерфейса)
* Отработать модульную структуру на проекте (реализация паттерна "Модуль")
* Организация рабочего процесса по унифицированному процессу (обучение навыкам из [книги](http://www.williamspublishing.com/Books/978-5-8459-1185-8.html) на проекте)

### Выводы
* ТЗ реализовано не полностью: кол-во лифтов должно быть настраиваемым
* Чрезмерно активное использование событий для обновления интерфейса как связующего звена между моделью и представлением ведет к усложнению поддержки проекта; большое кол-во рутинного кода манипуляций с DOM
* Реализация паттерна "Модуль" имеет много недостатков; помимо этого, я смешал понятия модуль и класс
* Книга прочитана не полностью; создано небольшое количество артефактов
### Планы (TODO)
* Несколько параллельно работающих лифтов
* Реализация проекта с применением классов
* Использование готовых инструментов для организации модульности
* Переписать на ES6
* Переписать c использованием React
